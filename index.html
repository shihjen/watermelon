<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ÂÜ¨ÁìúÁîüÊó•Âø´‰πê</title>

  <link rel="icon" type="image/png" href="asset/img/watermelon00.png">
  <link rel="stylesheet" href="style/style.css">

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Pacifico&family=Nunito:wght@300;400;600&display=swap" rel="stylesheet">
</head>

<body>

  <!-- Background Music -->
  <audio id="bgm" loop>
    <source src="asset/music/watermelon.mp3" type="audio/mpeg">
  </audio>

  <div class="wrapper">
    <h1>Happy Birthday</h1>
    <div class="grid">
      <!-- Watermelons -->
      <div class="watermelon" data-img="asset/img/watermelon11g2.gif" 
      data-caption="„ÄåË∫´‰ΩìÂÅ•ÂÅ•Â∫∑Â∫∑„Äç"
      data-text="ÊÑø‰Ω†Ë∫´‰ΩìÂÆâÂ∫∑„ÄÅÁ≤æÂäõÂÖÖÊ≤õÔºåÊØè‰∏ÄÂ§©ÈÉΩÂÖÉÊ∞îÊª°Êª°„ÄÇÂú®ÂøôÁ¢åÁöÑÊó•Â≠êÈáåÔºåÊÄªÊúâ‰ΩôË£ï‰∏∫Ëá™Â∑±Áïô‰∏Ä‰ªΩ‰ªéÂÆπÔºåÂéªÂÅöÁúüÊ≠£ÂñúÊ¨¢ÁöÑ‰∫ã„ÄÇËÆ∞ÂæóÂ•ΩÂ•ΩÁÖßÈ°æËá™Â∑±Ôºå‰πüÂà´Âøò‰∫ÜÂøôÈáåÂÅ∑Èó≤„ÄÇ" 
      data-date="üçÄÁ•ùÁ¶è #1">
        <img src="asset/img/watermelon0.png" alt="Watermelon" />
      </div>
      <div class="watermelon" data-img="asset/img/watermelon12g2.gif" 
      data-caption="„ÄåÁßëÁ†îÂ∑•‰ΩúÈ°∫Âà©„Äç" 
      data-text="Âú®ÁßëÁ†îËøôÊù°Êº´ÈïøÁöÑË∑Ø‰∏äÔºåÊÑø‰Ω†ÂßãÁªà‰øùÊúâÁÉ≠Áà±ÔºåÂú®‰∏ÄÊ¨°Ê¨°Êé¢Á¥¢‰∏≠ÊâæÂà∞Â±û‰∫éËá™Â∑±ÁöÑÂø´‰πê„ÄÇÊÑøÂÆûÈ™åËÆ°ÂàíÈ°∫Âà©Êé®ËøõÔºåÊï∞ÊçÆ‰πñ‰πñÈÖçÂêàÔºåÁªìÊûúÂ¶Ç‰Ω†ÊâÄÊÑø„ÄÇ‰∏çÊÄ•‰∏çÂæêÂÅöÂá∫ËÆ©Ëá™Â∑±È™ÑÂÇ≤„ÄÅ‰πüËÆ©‰ªñ‰∫∫Ê¨£ËµèÁöÑÊàêÊûú„ÄÇ‰Ω†ÈÇ£‰ªΩÊúâÊù°‰∏çÁ¥äÁöÑÂùöÊåÅÔºå‰∏ÄÂÆö‰ºöÊääÁêÜÊÉ≥‰∏ÄÊ≠•Ê≠•ÂèòÊàêÁé∞ÂÆû„ÄÇ" 
      data-date="üçÄÁ•ùÁ¶è #2">
        <img src="asset/img/watermelon0.png" alt="Watermelon" />
      </div>
      <div class="watermelon" data-img="asset/img/watermelon13g2.gif" 
      data-caption="„Äå‰∫ã‰∏öÊ≠•Ê≠•È´òÂçá„Äç" 
      data-text="ÊÑø‰Ω†‰∫ã‰∏öËí∏Ëí∏Êó•‰∏äÔºåÊ≠•Ê≠•È´òÂçá„ÄÇÁßëÁ†î‰πãË∑Ø‰∏ÄË∑ØÂºÄÊåÇ„ÄÇËÆ∫ÊñáÊäïÁ®øÁôæÂèëÁôæ‰∏≠ÔºåÂÆ°Á®ø‰∫∫ËøûËøûÁÇπÂ§¥ÔºåÂç≥‰æøË¶ÅÈ∏°ËõãÈáåÊåëÈ™®Â§¥‰πüÊâæ‰∏çÂà∞ÈóÆÈ¢òÔºå‰∏ÄËΩÆÈ°∫Âà©ÈÄöËøá„ÄÇ‰πüÊÑø‰Ω†Â∏∏ÊúâÊú∫‰ºöÁ´ô‰∏äÁ†îËÆ®‰ºöÁöÑËàûÂè∞ÔºåÂàÜ‰∫´‰Ω†ÁöÑÊàêÊûú‰∏éÊâçÂçé„ÄÇËÆ©Â§ßÂÆ∂ÈÉΩÁúãËßÅÔºöÂÜ¨ÁìúËôΩÂ∞èÔºåÂøóÊ∞îÂæàÈ´òÔºåÂÆûÂäõÊõ¥Âº∫„ÄÇ" 
      data-date="üçÄÁ•ùÁ¶è #3">
        <img src="asset/img/watermelon0.png" alt="Watermelon" />
      </div>
      <div class="watermelon" data-img="asset/img/watermelon14g2.gif" 
      data-caption="„ÄåHangry‰∏ç‰∏äÁ∫ø„Äç" 
      data-text="ËßÅËØÜËøá‰Ω† Hangry Êó∂ÁöÑÊ∞îÂú∫ÔºåÊâÄ‰ª•ÁúüÂøÉÁ•ùÁ¶èÔºö‰ªéÊ≠§‰ª•ÂêéÔºåÊ≤°Êúâ‰∫∫ËÉΩÊâìÊâ∞‰Ω†ÂêÉÈ•≠ÁöÑÁ•ûÂú£Êó∂Âàª„ÄÇ‰πüÊÑøÊØè‰∏ÄÊ¨°ÁîüÊ¥ª‰ΩéÊΩÆ‰∏çÂ¶ÇÊÑèÊó∂ÔºåÁæéÈ£üËÉΩÂ§üÂ∏¶Áªô‰Ω†‰∏ÄÁÇπÊ≤ªÊÑàÂíåÊÖ∞Ëóâ„ÄÇ" 
      data-date="üçÄÁ•ùÁ¶è #4">
        <img src="asset/img/watermelon0.png" alt="Watermelon" />
      </div>
      <div class="watermelon" data-img="asset/img/watermelon15g2.gif" 
      data-caption="„ÄåÁîüÊó•Âø´‰πê„Äç" 
      data-text="ÁîüÊó•Âø´‰πêÂëÄ ÂÜ¨Áìú„ÄÇÊÑøÂæÄÂêéÁöÑÊó•Â≠êÔºöÂπ≥ÂÆâ„ÄÅÂÅ•Â∫∑„ÄÅÈ°∫ÈÅÇ„ÄÅÂπ∏Á¶è„ÄÇÊúÄÈáçË¶ÅÁöÑÊòØÔºåË¶Å‰∏ÄÁõ¥‰∏ÄÁõ¥ÂºÄÂøÉÂø´‰πê„ÄÇ" 
      data-date="üçÄÁ•ùÁ¶è #5">
        <img src="asset/img/watermelon0.png" alt="Watermelon" />
      </div>
      <div class="watermelon" data-img="asset/img/watermelon16g2.gif" 
      data-caption="„ÄåÂ§úÂ§úÁù°‰∏™Â•ΩÁú†„Äç" 
      data-text="‰Ω†ËØ¥ËøáËá™Â∑±ÊµÖÁú†„ÄÅÂÆπÊòìË¢´ÂêµÈÜíÔºåÈÇ£Â∞±Á•ùÁ¶è‰Ω†‰ªéÊ≠§ÂÆâÁ®≥ÂÖ•Áù°ÔºåÂ§úÂ§úÂ•ΩÁú†Ôºå‰∏ÄËßâÂà∞Â§©‰∫ÆÔºåÈÜíÊù•ÁîµÂäõÊª°Ê†º„ÄÇËøòÊúâÔºå‰∏çË¶ÅÂÉè‰πê‰πê‰∏ÄÊ†∑ÁÜ¨Â§úÂï¶ÔºåÂπ≥Êó•Ë¶ÅÊó©Áù°ÔºåÂë®Êú´‰πüË¶ÅÂ•ΩÂ•Ω‰ºëÊÅØ„ÄÇ" 
      data-date="üçÄÁ•ùÁ¶è #6">
        <img src="asset/img/watermelon0.png" alt="Watermelon" />
      </div>
      <div class="watermelon" data-img="asset/img/watermelon17g2.gif" 
      data-caption="„ÄåÊé¢Á¥¢Ë∑Ø‰∏ä ‰∏ÄË∑ØÈ°∫ÈÅÇ„Äç" 
      data-text="ÊÑø‰Ω†Âú®Êé¢Á¥¢‰∏ñÁïå„ÄÅËµ∞ÈÅçÂêÑÂú∞ÁöÑÊóÖÈÄî‰∏≠Ôºå‰∏ÄË∑ØÂπ≥ÂÆâÈ°∫ÈÅÇ„ÄÇÊØè‰∏ÄÊ¨°Âá∫ÂèëÔºåÈÉΩËÉΩÈÅáËßÅÊñ∞Â•á‰∏éÊÉäÂñú„ÄÇÊóÖÈÄî‰∏≠ÈÅáËßÅÁöÑ‰∫∫„ÄÅ‰∫ã„ÄÅÁâ©‰∏éÈ£éÊôØÔºåÈÉΩËÉΩËÆ©‰Ω†Áî±Ë°∑Ê¨¢ÂñúÔºåÁïô‰∏ãÁèçË¥µÁæéÂ•ΩÁöÑÂõûÂøÜ„ÄÇÂ∏åÊúõ‰Ω†ËÉΩÂ§ü‰∏ÄÁõ¥ÁÉ≠Áà±ÁîüÊ¥ª„ÄÇ" 
      data-date="üçÄÁ•ùÁ¶è #7">
        <img src="asset/img/watermelon0.png" alt="Watermelon" />
      </div>
      <div class="watermelon" data-img="asset/img/watermelon18g2.gif" 
      data-caption="„ÄåÁÅµÊÑüÊ∫êÊ∫ê‰∏çÁªù„Äç" 
      data-text="‰∏çÁÆ°ÊòØÂú®‰∏ìÊ≥®ÂØªÊâæÁÅµÊÑüÔºåËøòÊòØÊîæÁ©∫Ëá™Â∑±„ÄÅÈùôÈùôÁïôÁôΩÔºåÊÑø‰Ω†ÁöÑ‚ÄúÂ§™Á©∫Êº´Ê∏∏‚ÄùÊó∂ÂàªÊ∞∏Ëøú‰∏çË¢´ÊâìÊâ∞„ÄÇÁÅµÊÑüÂ¶ÇÊòüÂÖâËà¨Âú®ËÑëÊµ∑‰∏≠Èó™ÁÉÅÔºå‰∏ÄÊ¨°Ê¨°ÁÇπ‰∫ÆÂàõÊÑèÁöÑÁû¨Èó¥„ÄÇÊÑøÊÄùÁª™Ëá™Áî±ÈÅ®Ê∏∏ÔºåÊØè‰∏ÄÊ¨°ÁÅµÊÑüÈôç‰∏¥ÔºåÈÉΩÂ∏¶Êù•ÊÉäÂñú‰∏éÊª°Ë∂≥„ÄÇ" 
      data-date="üçÄÁ•ùÁ¶è #8">
        <img src="asset/img/watermelon0.png" alt="Watermelon" />
      </div>
      <div class="watermelon" data-img="asset/img/watermelon19g2.gif" 
      data-caption="„ÄåÂ•Ω‰∫ãËøûËøû ËØ∏‰∫ãÁöÜÈ°∫„Äç" 
      data-text="ÊÑøÂ•Ω‰∫ãÊé•‰∫åËøû‰∏âÔºåÂπ∏ËøêÊ∫êÊ∫ê‰∏çÊñ≠„ÄÇÁîüÊ¥ªÈáåÂÖÖÊª°Â∞èÁ°ÆÂπ∏ÔºåÂ§ßÂ§ßÂ∞èÂ∞èÁöÑÁæéÂ•ΩËΩÆÁï™ÁôªÂú∫„ÄÇËè©Ëê®„ÄÅËÄ∂Á®£„ÄÅÂú£ÊØç„ÄÅÂêÑË∑ØÂ§ßÁ•ûÈÉΩÈªòÈªò‰∏∫‰Ω†ÊéíÁè≠ÂÆàÊä§ÔºåËÆ©‰Ω†Êó∂Êó∂ÂàªÂàªÈÉΩË¢´Âπ∏Á¶èÂåÖÂõ¥„ÄÇ" 
      data-date="üçÄÁ•ùÁ¶è #9">
        <img src="asset/img/watermelon0.png" alt="Watermelon" />
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal" id="modal">
    <div class="memory-card">
      <button class="close-btn" id="closeBtn">√ó</button>
      <div class="polaroid">
        <img id="modalImg" src="" alt="Memory image" />
        <div class="caption" id="modalCaption"></div>
      </div>
      <div class="memory-text" id="modalText"></div>
      <div class="memory-date" id="modalDate"></div>
    </div>
  </div>

  <!-- Music UI -->
  <div class="music-btn" id="musicBtn">üîä Music</div>
  <div class="tap-hint" id="tapHint">Tap once to enable music</div>

  <script>
  // Floating watermelon micro-movement
  document.querySelectorAll('.watermelon').forEach(melon => {
    setInterval(() => {
      const dx = (Math.random() - 0.5) * 1.5;
      const dy = (Math.random() - 0.5) * 1.5;
      const rot = (Math.random() - 0.5) * 0.8;
      melon.style.transform = `translate(${dx}px, ${dy}px) rotate(${rot}deg)`;
    }, 1800 + Math.random() * 1200);
  });

  const modal = document.getElementById('modal');
  const modalImg = document.getElementById('modalImg');
  const modalText = document.getElementById('modalText');
  const modalCaption = document.getElementById('modalCaption');
  const modalDate = document.getElementById('modalDate');
  const closeBtn = document.getElementById('closeBtn');

  let typingTimeout; // to stop previous typing when switching cards

  // Typewriter effect
  function typeWriter(element, text, speed = 55) {
    clearTimeout(typingTimeout);
    element.textContent = "";
    let i = 0;

    function type() {
      if (i < text.length) {
        element.textContent += text.charAt(i);
        i++;
        typingTimeout = setTimeout(type, speed);
      }
    }

    type();
  }

  document.querySelectorAll('.watermelon').forEach(item => {
    item.addEventListener('click', () => {
      item.classList.add('opening');

      setTimeout(() => {
        item.classList.remove('opening');

        // Show modal
        modalImg.src = item.dataset.img;
        modalCaption.textContent = item.dataset.caption;
        modalDate.textContent = item.dataset.date;
        modal.classList.add('active');

        // ‚ú® Delay before typing for better emotional pacing
        modalText.textContent = ""; // clear previous text

        setTimeout(() => {
          typeWriter(modalText, item.dataset.text);
        }, 2400); // 500ms delay (adjustable)

        // üçâ Floating emojis
        for (let i = 0; i < 5; i++) {
          const petal = document.createElement('div');
          petal.className = 'heart';
          petal.textContent = 'üçâ';
          petal.style.left = (50 + (Math.random()*40 - 20)) + '%';
          petal.style.bottom = '30%';
          document.body.appendChild(petal);
          setTimeout(() => petal.remove(), 2500);
        }
      }, 500);
    });
  });

  // Close modal
  closeBtn.addEventListener('click', () => {
    modal.classList.remove('active');
    clearTimeout(typingTimeout);
  });

  modal.addEventListener('click', (e) => {
    if (e.target === modal) {
      modal.classList.remove('active');
      clearTimeout(typingTimeout);
    }
  });

  // ===== Music autoplay fix =====
  const bgm = document.getElementById('bgm');
  const btn = document.getElementById('musicBtn');
  const hint = document.getElementById('tapHint');

  hint.classList.add('show');

  function enableMusicOnce() {
    bgm.play().then(() => { hint.classList.remove('show'); }).catch(()=>{});
    document.removeEventListener('click', enableMusicOnce);
    document.removeEventListener('touchstart', enableMusicOnce);
    document.removeEventListener('keydown', enableMusicOnce);
  }

  document.addEventListener('click', enableMusicOnce);
  document.addEventListener('touchstart', enableMusicOnce);
  document.addEventListener('keydown', enableMusicOnce);

  btn.onclick = () => {
    if (bgm.paused) {
      bgm.play();
      btn.textContent = 'üîä Music';
    } else {
      bgm.pause();
      btn.textContent = 'üîá Muted';
    }
  };
</script>

</body>
</html>
